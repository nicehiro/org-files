#+HUGO_BASE_DIR: ~/Documents/hugo-static/
#+hugo_section: notes
#+hugo_auto_set_lstmod: t

#+TITLE: 计算机网络知识点总结

#+DATE: 2018-03-29
#+OPTIONS: toc:nil

** HTTP 协议
- HTTP 基于 TCP/IP（面向连接），但HTTP是无连接无状态的
- HTTP 1.1 默认支持 Keep-Alive，也就是说默认保持当前的 TCP 连接
- 可以根据 Content-Length 判断这次传输的数据是否已经完成；如果没有 Conten-Length，也就是说传输的数据大小的可变的，可多传一块空的 chunk 块表示数据已传输完成

*** Request
- 包含状态行（Get url HTTP版本）、请求头、正文（POST 正文）
- 基本的 4 个方法：get post put（改） delete
- Post 的类型： =application/x-www-form-urlencoded= （普通form类型）和 =multiple/form-data= 传文件、图片

*** Response
- 状态行（HTTP版本 200 OK）、响应头、响应正文
- 200 301（重定向） 304（文件未修改） 403（被紧） 404 500

*** 会话
- 服务器需要判断当前客户端是否是之前请求的客户
- URL 重写，维护一个 session id，每次请求时候加载 URL 之后来表示此会话
- 隐藏表单域，提交表格时，将 session id 一起提交，但此项不显示
- 服务器给客户端一个 cookie 让客户端保存在本地，请求时，将 cookie 一并提交

** TCP
- 面向字节流，全双工
- 累计确认；超时重传；冗余 ACK（连续三条冗余 ACK 收到时，马上重传丢失的那个报文）
- 拥塞控制：慢开始，拥塞避免算法；快重传，快恢复

*** 三次握手
- 客户端 -> 服务器：syn=1, seq=x
- 服务器 -> 客户端：syn=1, ack=1, acknums=x+1, seq=y
- 客户端 -> 服务器：ack=1, acknums=y+1；本次可以携带数据

*** 四次挥手
- 客户端 -> 服务器：fin=1, seq=x
- 服务器 -> 客户端：ack=1, acknums=x+1, 客户端单方面关闭连接
- 服务器如果还有数据要传，服务器 -> 客户端：传输据
- 服务器 -> 客户端：fin=1, seq=y
- 客户端 -> 服务器：ack=1, acknums=y+1

** UDP
- 报文是 UDP 处理的最小单位；直接加首部就交给 IP 层
- 首部：源端口号、目的端口号、UPD 长度、UDP 校验和

** IP
- 静态路由协议
- 动态路由协议
  - 距离向量算法 RIP 协议：每隔一段时间，每个路由器向自己相邻的路由器传送自己的所有路由信息，会产生慢收敛现象（更新扩散的慢）
  - 链路状态协议 OSPF：当某个路由状态更新时，立刻向周围的路由器扩散此更新信息
- 外部网关协议
- NAT 网络地址转换，将私有 IP 地址与 IP 地址转换，私有 IP：10.0.0.0、172.16.0.0-172.31.255.255、192.168.0.0-192.168.255.255
- ARP 协议：地址解析协议，将 IP 地址转为 MAC 地址。如果路由器有该 IP 的 MAC 地址，直接传到那个主机，如果没有，发送一条 ff:ff:ff:ff:ff:ff 的广播，取得相应的 MAC 地址
- DHCP 动态主机配置协议，客户机广播”DHCP发现“消息；服务机广播”DHCP提供“消息；如果客户机接受配置，发送”DHCP请求”广播；服务器广播确认消息
- ICMP 网际控制报文，包括 ICMP 差错控制报文和 ICMP 询问报文

** DNS 域名解析

** 滑动窗口流量控制和 ARQ 协议
滑动窗口：接受端只按序接受帧，采取稍带确认；如果某一帧没有在规定时间内没有收到，那么其之后的所有帧都得抛弃
ARQ：自动重传，只重传丢失的帧

** CSMA/CD 协议
- 载波监听，碰撞检测。检测到之后有 1-坚持 发送，非坚持，P-坚持发送三种

** 设备
- 中继器、集线器：物理层，扩大信号
- 网桥、交换机：数据链路层，隔离冲突域
